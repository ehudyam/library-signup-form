
<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>טופס הרשמה לספרייה</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      direction: rtl;
      text-align: right;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    canvas {
      border: 1px solid #000;
      width: 100%;
    }
    input, button, textarea {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      box-sizing: border-box;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <h2>טופס הרשמה לספרייה</h2>

  <h3>תנאי השימוש בספרייה</h3>
  <p>
    השאלת ספרים מותנית בקבלת התקנות המפורטות ובחתימה על טופס זה.
    השאלת הספרים היא למשך 30 יום.  
    במקרה של איחור בהחזרת הספרים תיתכן קנס בהתאם למדיניות הספרייה.
    החותם מתחייב לשמור על שלמות הספרים ולהחזירם במצב שבו ניתנו.
  </p>

  <form id="registrationForm">
    <label>שם פרטי:</label>
    <input type="text" id="firstName" required>

    <label>שם משפחה:</label>
    <input type="text" id="lastName" required>

    <label>תאריך:</label>
    <input type="date" id="date" required>

    <label>תעודת זהות:</label>
    <input type="text" id="idNumber" required>

    <label>טלפון נייד:</label>
    <input type="tel" id="mobilePhone" required>

    <label>טלפון קווי (אם יש):</label>
    <input type="tel" id="homePhone">

    <label>כתובת דוא"ל:</label>
    <input type="email" id="email" required>

    <label>כתובת מגורים:</label>
    <input type="text" id="address" required>

    <label>מספר נפשות בבית:</label>
    <input type="number" id="householdSize" required>

    <label>חתימה:</label>
    <canvas id="signatureCanvas" width="300" height="150"></canvas>
    <button type="button" id="clearButton">נקה חתימה</button>

    <button type="submit">שלח</button>
  </form>

  <script>
    const canvas = document.getElementById('signatureCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;

    canvas.addEventListener('mousedown', () => drawing = true);
    canvas.addEventListener('mouseup', () => drawing = false);
    canvas.addEventListener('mousemove', draw);

    canvas.addEventListener('touchstart', () => drawing = true);
    canvas.addEventListener('touchend', () => drawing = false);
    canvas.addEventListener('touchmove', draw);

    function draw(e) {
      e.preventDefault();
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX || e.touches[0].clientX) - rect.left;
      const y = (e.clientY || e.touches[0].clientY) - rect.top;
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    document.getElementById('clearButton').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });

    document.getElementById('registrationForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        date: document.getElementById('date').value,
        idNumber: document.getElementById('idNumber').value,
        mobilePhone: document.getElementById('mobilePhone').value,
        homePhone: document.getElementById('homePhone').value || 'לא סופק',
        email: document.getElementById('email').value,
        address: document.getElementById('address').value,
        householdSize: document.getElementById('householdSize').value,
        signature: canvas.toDataURL()
      };

      console.log(data); // נתונים להדפסה בלבד, כאן אפשר להוסיף שליחה לשרת או למייל
      alert('הטופס נשלח בהצלחה!');
    });
  </script>
</body>
</html>
